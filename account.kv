#: import SlideTransition kivy.uix.screenmanager.SlideTransition

### Templates ###

<NewLayout@FloatLayout>:
	size: 480, 800
	size_hint: None, None
	pos_hint: { "center_x" : 0.5, "center_y" : 0.5 }

<LongButton@Button>:
	font_name: "font.ttf"
	size: 300, 60
	size_hint: None, None

<SquareButton@Button>:
	font_size: 32
	size: 40, 40
	size_hint: None, None

<NewLabel@Label>:
	font_size: 24
	font_name: "font.ttf"
	halign: "left"
	color: [0, 0, 0, 1]
	size_hint: None, None

<NewTextInput@TextInput>:
	font_size: 24
	font_name: "font.ttf"
	size_hint: None, None
	multiline: False

### ScreenManager ###

ScreenNexus:
	MainScreen:
		on_enter: root.transition = SlideTransition(direction = "left")
	AddScreen:
		on_enter: root.transition = SlideTransition(direction = "right")
	ExportScreen:
		on_enter: root.transition = SlideTransition(direction = "right")

### Screens ###

<MainScreen>:
	name: "main"
	NewLayout:
		Image:
			source: "logo.png"
			size: 240, 240
			size_hint: None, None
			pos_hint: { "center_x" : 0.5, "center_y" : 0.75 }
			allow_stretch: True
		LongButton:
			text: "Kurs hinzufügen"
			font_size: 28
			pos_hint: { "center_x" : 0.5, "center_y" : 0.48 }
			on_release: app.root.current = "add" # Catch Exceptions
		NewLabel:
			text: "Datum:"
			text_size: 300, None
			pos_hint: { "center_x" : 0.5, "center_y" : 0.4 }
		NewTextInput:
			text: "24.06.2014"
			size: 200, 40
			pos_hint: { "center_x" : 0.6, "center_y" : 0.4 }
			on_text_validate: app.root.current = "add" # Catch Exceptions
		LongButton:
			text: "Abrechnung exportieren"
			font_size: 22
			pos_hint: { "center_x" : 0.5, "center_y" : 0.25 }
			on_release: app.root.current = "export"

<AddScreen>:
	name: "add"
	NewLayout:
		NewLabel:
			text: "Neuer Kurs:"
			text_size: 400, None
			pos_hint: { "center_x" : 0.5, "center_y" : 0.9 }
		SquareButton:
			text: "+"
			pos_hint: { "center_x" : 0.12, "center_y" : 0.85 }
			on_release: root.newCourse(new_name.text) # Create method
		NewTextInput:
			id: new_name
			size: 360, 40
			pos_hint: { "center_x" : 0.55, "center_y" : 0.85 }
			on_text_validate: root.newCourse(self.text) # Create method
		SquareButton:
			text: "<" # u"\u21A9"
			pos_hint: { "center_x" : 0.12, "center_y" : 0.1 }
			on_release: app.root.current = "main"
			
		ScrollView:
			height: 450
			size_hint_y: None
			pos_hint: { "center_y" : 0.46875 }
			StackLayout:
				height: self.minimum_height
				size_hint_y: None
			
			# Create dynamically:
				FloatLayout:
					height: 50
					size_hint_y: None
					SquareButton:
						id: del1
						text: u"\xD7" # u"\u00D7" or "×"
						pos_hint: { "center_x" : 0.12, "center_y" : 0.5 }
						background_color: [1, 0, 0, 1]
						on_release: root.delCourse(self.id) # Create method
					Button:
						id: apply1
						text: "Shuffle Trainer"
						font_size: 24
						font_name: "font.ttf"
						text_size: self.size[0] - 20, self.size[1] - 10
						halign: "left"
						size: 360, 40
						size_hint: None, None
						pos_hint: { "center_x" : 0.55, "center_y" : 0.5 }
						on_release: root.applyCourse(self.id) # Create method

<ExportScreen>:
	name: "export"
	NewLayout:
		NewLabel:
			text: "Verfügbare Monate:"
			text_size: 400, None
			pos_hint: { "center_x" : 0.5, "center_y" : 0.9 }
		Button:
			text: "Exportieren"
			font_size: 24
			font_name: "font.ttf"
			size: 200, 40
			size_hint: None, None
			pos_hint: { "center_x" : 0.5, "center_y" : 0.1 }
			on_release: root.exportMonths() # Create method
		SquareButton:
			text: "<" # u"\u21A9"
			pos_hint: { "center_x" : 0.12, "center_y" : 0.1 }
			on_release: app.root.current = "main"
		
		ScrollView:
			height: 500
			size_hint_y: None
			pos_hint: { "center_y" : 0.5 }
			StackLayout:
				height: self.minimum_height
				size_hint_y: None
				
				# Create dynamically:
				FloatLayout:
					height: 50
					size_hint_y: None
					NewLabel:
						text: "Juni 2014"
						text_size: 400, None
						pos_hint: { "center_x" : 0.5, "center_y" : 0.5 }
					Switch:
						active: True
						pos_hint: { "center_x" : 0.8, "center_y" : 0.5 }
		



